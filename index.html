<!DOCTYPE html>
<html lang="en" data-theme="dim">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pandoc GUI</title>
  <link rel="stylesheet" href="/src/style.css">
  <link rel="icon" href="/icon.png" type="image/png">
</head>
<body class="min-h-screen bg-base-100 text-base-content text-sm">

  <div class="p-3 space-y-3 max-w-5xl mx-auto">

    <!-- File I/O + PDF Engine Section -->
    <div class="card bg-base-200">
      <div class="card-body p-3 space-y-2">
        <!-- Input File Row -->
        <div class="flex items-center gap-2">
          <button id="browseInput" class="btn btn-primary btn-sm gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"/></svg>
            Open
          </button>
          <span id="inputPath" class="flex-1 text-sm font-mono truncate text-base-content/70">No file selected</span>
          <input type="file" id="inputFile" class="hidden" accept=".md,.markdown,.rst,.tex,.latex,.docx,.doc,.html,.htm,.org,.txt,.adoc,.asciidoc,.epub,.odt,.rtf,.json,.yaml,.yml">
          <div id="pdfEngineSection" class="w-44">
            <div class="dropdown dropdown-end w-full">
              <div tabindex="0" role="button" class="btn btn-sm w-full justify-between font-normal">
                <span id="pdfEngineLabel">Tectonic</span>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
              </div>
              <ul tabindex="0" class="dropdown-content menu bg-base-200 rounded-box z-50 w-72 p-2 shadow-lg">
                <li><a class="pdf-engine-option flex justify-between items-center" data-value="tectonic">
                  <span>Tectonic</span>
                  <div class="tooltip tooltip-left" data-tip="Auto-downloads LaTeX packages. No TeX install needed.">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-info" fill="none" viewBox="0 0 24 24" stroke="currentColor"><circle cx="12" cy="12" r="10" stroke-width="2"/><path stroke-linecap="round" stroke-width="2" d="M12 16v-4m0-4h.01"/></svg>
                  </div>
                </a></li>
                <li><a class="pdf-engine-option flex justify-between items-center" data-value="lualatex">
                  <span>LuaLaTeX</span>
                  <div class="tooltip tooltip-left" data-tip="Best Unicode & OpenType fonts. Slower but powerful.">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-info" fill="none" viewBox="0 0 24 24" stroke="currentColor"><circle cx="12" cy="12" r="10" stroke-width="2"/><path stroke-linecap="round" stroke-width="2" d="M12 16v-4m0-4h.01"/></svg>
                  </div>
                </a></li>
                <li><a class="pdf-engine-option flex justify-between items-center" data-value="xelatex">
                  <span>XeLaTeX</span>
                  <div class="tooltip tooltip-left" data-tip="Good Unicode. Uses system fonts. Faster than LuaLaTeX.">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-info" fill="none" viewBox="0 0 24 24" stroke="currentColor"><circle cx="12" cy="12" r="10" stroke-width="2"/><path stroke-linecap="round" stroke-width="2" d="M12 16v-4m0-4h.01"/></svg>
                  </div>
                </a></li>
                <li><a class="pdf-engine-option flex justify-between items-center" data-value="pdflatex">
                  <span>pdfLaTeX</span>
                  <div class="tooltip tooltip-left" data-tip="Classic, fastest. Limited Unicode. Simple ASCII docs.">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-info" fill="none" viewBox="0 0 24 24" stroke="currentColor"><circle cx="12" cy="12" r="10" stroke-width="2"/><path stroke-linecap="round" stroke-width="2" d="M12 16v-4m0-4h.01"/></svg>
                  </div>
                </a></li>
              </ul>
            </div>
            <input type="hidden" id="pdfEngine" value="tectonic">
          </div>
        </div>

        <!-- Output Row -->
        <div class="flex items-center gap-2">
          <button id="browseOutput" class="btn btn-ghost btn-sm btn-square" title="Change output folder">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"/></svg>
          </button>
          <input type="text" id="outputName" class="input input-bordered input-sm flex-1 font-mono text-sm" placeholder="output filename">
          <span class="text-lg font-bold text-base-content/50">.</span>
          <select id="outputFormat" class="select select-bordered select-sm w-24">
            <option value="pdf">pdf</option>
            <option value="docx">docx</option>
            <option value="html">html</option>
            <option value="epub">epub</option>
            <option value="odt">odt</option>
            <option value="latex">tex</option>
            <option value="pptx">pptx</option>
            <option value="markdown">md</option>
            <option value="rst">rst</option>
            <option value="plain">txt</option>
          </select>
        </div>

        <!-- Output path display -->
        <div class="flex items-center gap-2">
          <span class="text-xs text-base-content/50">Output:</span>
          <span id="outputDir" class="text-xs font-mono truncate text-base-content/70">Select input file first</span>
        </div>
      </div>
    </div>

    <!-- Main Options Tabs -->
    <div class="card bg-base-200">
      <div class="card-body p-0">
        <div role="tablist" class="tabs tabs-lifted">

          <!-- Layout Tab -->
          <input type="radio" name="mainTabs" role="tab" class="tab" aria-label="Layout" checked />
          <div role="tabpanel" class="tab-content bg-base-100 border-base-300 rounded-box p-3">
            <div class="grid grid-cols-4 gap-3 items-end">
              <!-- Paper Settings -->
              <div class="form-control">
                <label class="label py-0.5">
                  <span class="label-text">Paper Size</span>
                  <div class="tooltip tooltip-left" data-tip="Physical paper dimensions">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 text-info" fill="none" viewBox="0 0 24 24" stroke="currentColor"><circle cx="12" cy="12" r="10" stroke-width="2"/><path stroke-linecap="round" stroke-width="2" d="M12 16v-4m0-4h.01"/></svg>
                  </div>
                </label>
                <select id="paperSize" class="select select-bordered select-sm w-full">
                  <option value="a4">A4</option>
                  <option value="letter">Letter</option>
                  <option value="a5">A5</option>
                  <option value="legal">Legal</option>
                </select>
              </div>
              <div class="form-control">
                <label class="label py-0.5"><span class="label-text">Orientation</span></label>
                <select id="orientation" class="select select-bordered select-sm w-full">
                  <option value="portrait">Portrait</option>
                  <option value="landscape">Landscape</option>
                </select>
              </div>
              <div class="form-control">
                <label class="label py-0.5">
                  <span class="label-text">Font Size (pt)</span>
                  <div class="tooltip tooltip-left" data-tip="Base font size for body text">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 text-info" fill="none" viewBox="0 0 24 24" stroke="currentColor"><circle cx="12" cy="12" r="10" stroke-width="2"/><path stroke-linecap="round" stroke-width="2" d="M12 16v-4m0-4h.01"/></svg>
                  </div>
                </label>
                <input type="number" id="fontSize" class="input input-bordered input-sm w-full" value="12" min="6" max="72" step="0.5">
              </div>
              <div class="form-control">
                <label class="label py-0.5">
                  <span class="label-text">Line Height</span>
                  <div class="tooltip tooltip-left" data-tip="Space between lines">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 text-info" fill="none" viewBox="0 0 24 24" stroke="currentColor"><circle cx="12" cy="12" r="10" stroke-width="2"/><path stroke-linecap="round" stroke-width="2" d="M12 16v-4m0-4h.01"/></svg>
                  </div>
                </label>
                <select id="lineHeight" class="select select-bordered select-sm w-full">
                  <option value="1">Single</option>
                  <option value="1.15">1.15</option>
                  <option value="1.5" selected>1.5</option>
                  <option value="2">Double</option>
                </select>
              </div>

              <!-- Margins Row -->
              <div class="col-span-4">
                <div class="divider my-1 text-xs">Margins</div>
              </div>

              <!-- Uniform toggle + Unit + All Sides on same row -->
              <div class="form-control">
                <label class="label py-0.5"><span class="label-text">Uniform</span></label>
                <label class="swap swap-flip h-8 w-full bg-base-200 rounded-lg border border-base-300 flex items-center justify-center">
                  <input type="checkbox" id="uniformMargins" checked>
                  <span class="swap-on text-primary font-bold">ON</span>
                  <span class="swap-off text-base-content/50">OFF</span>
                </label>
              </div>

              <div class="form-control">
                <label class="label py-0.5"><span class="label-text">Unit</span></label>
                <select id="marginUnit" class="select select-bordered select-sm w-full">
                  <option value="in">in</option>
                  <option value="cm">cm</option>
                  <option value="mm">mm</option>
                </select>
              </div>

              <div id="uniformMarginInput" class="form-control col-span-2">
                <label class="label py-0.5"><span class="label-text">All Sides</span></label>
                <input type="number" id="marginAll" class="input input-bordered input-sm w-full" value="1" step="0.25" min="0">
              </div>

              <!-- Individual margins (shown when uniform is off) - 4 in same row -->
              <div id="individualMargins" class="hidden col-span-4 grid grid-cols-4 gap-3">
                <div class="form-control">
                  <label class="label py-0.5"><span class="label-text">Top</span></label>
                  <input type="number" id="marginTop" class="input input-bordered input-sm w-full" value="1" step="0.25" min="0">
                </div>
                <div class="form-control">
                  <label class="label py-0.5"><span class="label-text">Bottom</span></label>
                  <input type="number" id="marginBottom" class="input input-bordered input-sm w-full" value="1" step="0.25" min="0">
                </div>
                <div class="form-control">
                  <label class="label py-0.5"><span class="label-text">Left</span></label>
                  <input type="number" id="marginLeft" class="input input-bordered input-sm w-full" value="1" step="0.25" min="0">
                </div>
                <div class="form-control">
                  <label class="label py-0.5"><span class="label-text">Right</span></label>
                  <input type="number" id="marginRight" class="input input-bordered input-sm w-full" value="1" step="0.25" min="0">
                </div>
              </div>
            </div>
          </div>

          <!-- Typography Tab -->
          <input type="radio" name="mainTabs" role="tab" class="tab" aria-label="Fonts" />
          <div role="tabpanel" class="tab-content bg-base-100 border-base-300 rounded-box p-3">
            <div class="grid grid-cols-4 gap-3 items-end">
              <div class="form-control col-span-2">
                <label class="label py-0.5">
                  <span class="label-text">Main Font</span>
                  <div class="tooltip tooltip-left" data-tip="Primary typeface for body text">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 text-info" fill="none" viewBox="0 0 24 24" stroke="currentColor"><circle cx="12" cy="12" r="10" stroke-width="2"/><path stroke-linecap="round" stroke-width="2" d="M12 16v-4m0-4h.01"/></svg>
                  </div>
                </label>
                <select id="mainFont" class="select select-bordered select-sm w-full">
                  <option value="">System Default</option>
                </select>
              </div>
              <div class="form-control col-span-2">
                <label class="label py-0.5">
                  <span class="label-text">Monospace Font</span>
                  <div class="tooltip tooltip-left" data-tip="Fixed-width font for code blocks">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 text-info" fill="none" viewBox="0 0 24 24" stroke="currentColor"><circle cx="12" cy="12" r="10" stroke-width="2"/><path stroke-linecap="round" stroke-width="2" d="M12 16v-4m0-4h.01"/></svg>
                  </div>
                </label>
                <select id="monoFont" class="select select-bordered select-sm w-full">
                  <option value="">System Default</option>
                </select>
              </div>

              <div class="col-span-4">
                <div class="divider my-1 text-xs">Code Highlighting</div>
              </div>

              <div class="form-control">
                <label class="label py-0.5">
                  <span class="label-text">Theme</span>
                  <div class="tooltip tooltip-left" data-tip="Color scheme for code blocks">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 text-info" fill="none" viewBox="0 0 24 24" stroke="currentColor"><circle cx="12" cy="12" r="10" stroke-width="2"/><path stroke-linecap="round" stroke-width="2" d="M12 16v-4m0-4h.01"/></svg>
                  </div>
                </label>
                <select id="highlightTheme" class="select select-bordered select-sm w-full">
                  <optgroup label="Light">
                    <option value="pygments">Pygments</option>
                    <option value="kate">Kate</option>
                    <option value="tango">Tango</option>
                  </optgroup>
                  <optgroup label="Dark">
                    <option value="breezedark" selected>Breeze Dark</option>
                    <option value="zenburn">Zenburn</option>
                    <option value="nord">Nord</option>
                    <option value="dracula">Dracula</option>
                    <option value="monokai">Monokai</option>
                    <option value="gruvbox-dark">Gruvbox</option>
                    <option value="solarized-dark">Solarized</option>
                  </optgroup>
                </select>
              </div>

              <div class="form-control">
                <label class="label py-0.5"><span class="label-text">Line Numbers</span></label>
                <label class="swap swap-flip h-8 w-full bg-base-200 rounded-lg border border-base-300 flex items-center justify-center">
                  <input type="checkbox" id="lineNumbers">
                  <span class="swap-on text-primary font-bold">ON</span>
                  <span class="swap-off text-base-content/50">OFF</span>
                </label>
              </div>

              <div class="form-control">
                <label class="label py-0.5"><span class="label-text">Background</span></label>
                <label class="swap swap-flip h-8 w-full bg-base-200 rounded-lg border border-base-300 flex items-center justify-center">
                  <input type="checkbox" id="codeBlockBg" checked>
                  <span class="swap-on text-primary font-bold">ON</span>
                  <span class="swap-off text-base-content/50">OFF</span>
                </label>
              </div>

              <div class="form-control">
                <label class="label py-0.5"><span class="label-text">BG Color</span></label>
                <input type="color" id="codeBlockBgColor" class="w-full h-8 rounded cursor-pointer border border-base-300" value="#282a36">
              </div>

              <div class="col-span-4">
                <label class="label py-0.5"><span class="label-text text-xs">Preview</span></label>
                <div id="codePreview" class="rounded-lg p-3 font-mono text-xs border border-base-300">
                  <div><span class="cm">// Greeting function</span></div>
                  <div><span class="kw">function</span> <span class="fn">hello</span>() {</div>
                  <div>  <span class="kw">const</span> msg = <span class="st">"Hello, World!"</span>;</div>
                  <div>  <span class="kw">return</span> msg;</div>
                  <div>}</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Document Tab -->
          <input type="radio" name="mainTabs" role="tab" class="tab" aria-label="Document" />
          <div role="tabpanel" class="tab-content bg-base-100 border-base-300 rounded-box p-3">
            <div class="space-y-3">
              <!-- Structure Options -->
              <div class="grid grid-cols-3 gap-2">
                <label class="label cursor-pointer justify-start gap-2 bg-base-200 rounded-lg px-3 py-2">
                  <input type="checkbox" id="titlePage" class="checkbox checkbox-primary checkbox-sm">
                  <div>
                    <span class="label-text font-medium text-sm">Title Page</span>
                    <p class="text-xs text-base-content/60">Separate title page</p>
                  </div>
                </label>
                <label class="label cursor-pointer justify-start gap-2 bg-base-200 rounded-lg px-3 py-2">
                  <input type="checkbox" id="toc" class="checkbox checkbox-primary checkbox-sm">
                  <div>
                    <span class="label-text font-medium text-sm">Table of Contents</span>
                    <p class="text-xs text-base-content/60">Auto from headings</p>
                  </div>
                </label>
                <label class="label cursor-pointer justify-start gap-2 bg-base-200 rounded-lg px-3 py-2">
                  <input type="checkbox" id="numberSections" class="checkbox checkbox-primary checkbox-sm">
                  <div>
                    <span class="label-text font-medium text-sm">Number Sections</span>
                    <p class="text-xs text-base-content/60">1. Intro, 1.1 Sub...</p>
                  </div>
                </label>
                <label class="label cursor-pointer justify-start gap-2 bg-base-200 rounded-lg px-3 py-2">
                  <input type="checkbox" id="lof" class="checkbox checkbox-primary checkbox-sm">
                  <div>
                    <span class="label-text font-medium text-sm">List of Figures</span>
                    <p class="text-xs text-base-content/60">Figure index</p>
                  </div>
                </label>
                <label class="label cursor-pointer justify-start gap-2 bg-base-200 rounded-lg px-3 py-2">
                  <input type="checkbox" id="lot" class="checkbox checkbox-primary checkbox-sm">
                  <div>
                    <span class="label-text font-medium text-sm">List of Tables</span>
                    <p class="text-xs text-base-content/60">Table index</p>
                  </div>
                </label>
                <label id="standaloneLabel" class="label cursor-pointer justify-start gap-2 bg-base-200 rounded-lg px-3 py-2 hidden">
                  <input type="checkbox" id="standalone" class="checkbox checkbox-primary checkbox-sm" checked>
                  <div>
                    <span class="label-text font-medium text-sm">Standalone</span>
                    <p class="text-xs text-base-content/60">Complete document</p>
                  </div>
                </label>
              </div>

              <!-- TOC Options -->
              <div id="tocOptions" class="hidden bg-base-200 rounded-lg p-3">
                <div class="flex items-center gap-4">
                  <span class="text-sm font-medium">TOC Depth:</span>
                  <input type="range" id="tocDepth" min="1" max="6" value="3" class="range range-primary range-xs w-32">
                  <span id="tocDepthValue" class="badge badge-primary badge-sm">3</span>
                  <label class="label cursor-pointer gap-2">
                    <input type="checkbox" id="tocNewPage" class="checkbox checkbox-xs">
                    <span class="label-text text-sm">New page after TOC</span>
                  </label>
                </div>
              </div>

              <!-- Document Class & Top Level Division -->
              <div class="grid grid-cols-2 gap-3">
                <div class="form-control">
                  <label class="label py-0.5">
                    <span class="label-text">Document Class</span>
                    <div class="tooltip tooltip-left" data-tip="LaTeX document class type">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 text-info" fill="none" viewBox="0 0 24 24" stroke="currentColor"><circle cx="12" cy="12" r="10" stroke-width="2"/><path stroke-linecap="round" stroke-width="2" d="M12 16v-4m0-4h.01"/></svg>
                    </div>
                  </label>
                  <select id="documentClass" class="select select-bordered select-sm w-full">
                    <option value="article">Article</option>
                    <option value="report">Report</option>
                    <option value="book">Book</option>
                    <option value="memoir">Memoir</option>
                    <option value="scrartcl">KOMA Article</option>
                  </select>
                </div>
                <div class="form-control">
                  <label class="label py-0.5">
                    <span class="label-text">Top-Level Headings</span>
                    <div class="tooltip tooltip-left" data-tip="How # headings are interpreted">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 text-info" fill="none" viewBox="0 0 24 24" stroke="currentColor"><circle cx="12" cy="12" r="10" stroke-width="2"/><path stroke-linecap="round" stroke-width="2" d="M12 16v-4m0-4h.01"/></svg>
                    </div>
                  </label>
                  <select id="topLevelDiv" class="select select-bordered select-sm w-full">
                    <option value="default">Default</option>
                    <option value="part">Parts</option>
                    <option value="chapter">Chapters</option>
                    <option value="section">Sections</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <!-- Content Tab -->
          <input type="radio" name="mainTabs" role="tab" class="tab" aria-label="Content" />
          <div role="tabpanel" class="tab-content bg-base-100 border-base-300 rounded-box p-3">
            <div class="space-y-3">
              <!-- Tokens Reference -->
              <div class="collapse collapse-arrow bg-base-200 rounded-lg">
                <input type="checkbox" id="tokensCollapse" checked />
                <div class="collapse-title py-2 min-h-0 font-medium text-sm">
                  Tokens (drag to fields)
                </div>
                <div class="collapse-content pb-2">
                  <div class="flex flex-wrap gap-1.5" id="tokenList">
                    <span class="badge badge-primary badge-sm cursor-grab gap-1" draggable="true" data-token="{today}">{today}</span>
                    <span class="badge badge-primary badge-sm cursor-grab gap-1" draggable="true" data-token="{year}">{year}</span>
                    <span class="badge badge-secondary badge-sm cursor-grab gap-1" draggable="true" data-token="{file}">{file}</span>
                    <span class="badge badge-secondary badge-sm cursor-grab gap-1" draggable="true" data-token="{user}">{user}</span>
                    <span class="badge badge-accent badge-sm cursor-grab gap-1" draggable="true" data-token="{title}">{title}</span>
                    <span class="badge badge-accent badge-sm cursor-grab gap-1" draggable="true" data-token="{author}">{author}</span>
                    <span class="badge badge-accent badge-sm cursor-grab gap-1" draggable="true" data-token="{date}">{date}</span>
                    <span class="badge badge-info badge-sm cursor-grab gap-1" draggable="true" data-token="{page}">{page}</span>
                    <span class="badge badge-info badge-sm cursor-grab gap-1" draggable="true" data-token="{pages}">{pages}</span>
                    <span class="badge badge-warning badge-sm cursor-grab gap-1" draggable="true" data-token="{section}">{section}</span>
                    <span class="badge badge-warning badge-sm cursor-grab gap-1" draggable="true" data-token="{chapter}">{chapter}</span>
                  </div>
                </div>
              </div>

              <!-- Metadata -->
              <div class="grid grid-cols-3 gap-3">
                <div class="form-control">
                  <label class="label py-0.5"><span class="label-text">Title</span></label>
                  <input type="text" id="docTitle" class="input input-bordered input-sm w-full" placeholder="{file}">
                </div>
                <div class="form-control">
                  <label class="label py-0.5"><span class="label-text">Author</span></label>
                  <input type="text" id="docAuthor" class="input input-bordered input-sm w-full" placeholder="{user}">
                </div>
                <div class="form-control">
                  <label class="label py-0.5"><span class="label-text">Date</span></label>
                  <input type="text" id="docDate" class="input input-bordered input-sm w-full" placeholder="{today}">
                </div>
              </div>

              <!-- Headers & Footers -->
              <div class="grid grid-cols-6 gap-2">
                <div class="col-span-6 text-xs font-medium text-base-content/70">Headers</div>
                <div class="form-control col-span-2">
                  <input type="text" id="headerLeft" class="input input-bordered input-sm w-full font-mono text-xs" placeholder="Left">
                </div>
                <div class="form-control col-span-2">
                  <input type="text" id="headerCenter" class="input input-bordered input-sm w-full font-mono text-xs" placeholder="Center">
                </div>
                <div class="form-control col-span-2">
                  <input type="text" id="headerRight" class="input input-bordered input-sm w-full font-mono text-xs" placeholder="Right">
                </div>
                <div class="col-span-6 text-xs font-medium text-base-content/70 mt-1">Footers</div>
                <div class="form-control col-span-2">
                  <input type="text" id="footerLeft" class="input input-bordered input-sm w-full font-mono text-xs" placeholder="Left">
                </div>
                <div class="form-control col-span-2">
                  <input type="text" id="footerCenter" class="input input-bordered input-sm w-full font-mono text-xs" placeholder="Page {page}">
                </div>
                <div class="form-control col-span-2">
                  <input type="text" id="footerRight" class="input input-bordered input-sm w-full font-mono text-xs" placeholder="Right">
                </div>
              </div>

              <!-- Page Numbers -->
              <div class="grid grid-cols-3 gap-3">
                <div class="form-control">
                  <label class="label py-0.5"><span class="label-text">Page Format</span></label>
                  <select id="pageNumberFormat" class="select select-bordered select-sm w-full">
                    <option value="page">Page N</option>
                    <option value="page-of">N of X</option>
                    <option value="number">N only</option>
                  </select>
                </div>
                <div class="form-control">
                  <label class="label py-0.5"><span class="label-text">Position</span></label>
                  <select id="pageNumberPosition" class="select select-bordered select-sm w-full">
                    <option value="bottom-center">Bottom Center</option>
                    <option value="bottom-right">Bottom Right</option>
                    <option value="top-right">Top Right</option>
                  </select>
                </div>
                <div class="form-control">
                  <label class="label py-0.5"><span class="label-text">Style</span></label>
                  <select id="pageNumberStyle" class="select select-bordered select-sm w-full">
                    <option value="arabic">1, 2, 3</option>
                    <option value="roman">i, ii, iii</option>
                    <option value="Roman">I, II, III</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <!-- Advanced Tab -->
          <input type="radio" name="mainTabs" role="tab" class="tab" aria-label="Advanced" />
          <div role="tabpanel" class="tab-content bg-base-100 border-base-300 rounded-box p-3">
            <div class="space-y-3">
              <!-- Mermaid -->
              <div class="flex items-center gap-3 flex-wrap">
                <span class="font-medium text-sm">Mermaid Diagrams</span>
                <span id="mermaidDetected" class="badge badge-success badge-sm hidden">Detected</span>
                <label class="label cursor-pointer gap-1.5">
                  <input type="radio" name="mermaidFormat" value="svg" class="radio radio-primary radio-xs" checked>
                  <span class="label-text text-sm">SVG</span>
                </label>
                <label class="label cursor-pointer gap-1.5">
                  <input type="radio" name="mermaidFormat" value="png" class="radio radio-primary radio-xs">
                  <span class="label-text text-sm">PNG</span>
                </label>
              </div>

              <!-- Filters -->
              <div class="flex flex-wrap gap-2">
                <label class="label cursor-pointer gap-2 bg-base-200 rounded-lg px-3 py-2">
                  <input type="checkbox" id="filterCrossref" class="checkbox checkbox-primary checkbox-sm">
                  <div>
                    <span class="label-text font-medium text-sm">pandoc-crossref</span>
                    <p class="text-xs text-base-content/60">@fig:name, @eq:name</p>
                  </div>
                </label>
                <label class="label cursor-pointer gap-2 bg-base-200 rounded-lg px-3 py-2">
                  <input type="checkbox" id="filterCiteproc" class="checkbox checkbox-primary checkbox-sm">
                  <div>
                    <span class="label-text font-medium text-sm">citeproc</span>
                    <p class="text-xs text-base-content/60">[@key] citations</p>
                  </div>
                </label>
              </div>

              <!-- Link Colors -->
              <div class="flex items-center gap-3">
                <label class="label cursor-pointer gap-2">
                  <input type="checkbox" id="colorLinks" class="checkbox checkbox-primary checkbox-sm" checked>
                  <span class="label-text text-sm">Colored links</span>
                </label>
                <input type="color" id="linkColor" class="w-8 h-6 rounded cursor-pointer border border-base-300" value="#0066cc">
              </div>

              <!-- Extra Arguments -->
              <div class="form-control">
                <label class="label py-0.5">
                  <span class="label-text text-sm">Extra Pandoc Arguments</span>
                  <span class="label-text-alt text-xs">Advanced</span>
                </label>
                <input type="text" id="extraArgs" class="input input-bordered input-sm w-full font-mono text-xs" placeholder="--wrap=none --columns=80">
              </div>
            </div>
          </div>

          <!-- Command Tab -->
          <input type="radio" name="mainTabs" role="tab" class="tab" aria-label="Command" />
          <div role="tabpanel" class="tab-content bg-base-100 border-base-300 rounded-box p-3">
            <div class="space-y-2">
              <code id="commandPreview" class="block p-3 bg-base-300 rounded-lg text-xs font-mono whitespace-pre-wrap break-all max-h-48 overflow-y-auto">pandoc input.md -o output.pdf</code>
              <button id="copyCmd" class="btn btn-outline btn-sm gap-1">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
                Copy
              </button>
            </div>
          </div>

        </div>
      </div>
    </div>

    <!-- Convert Section -->
    <div class="card bg-base-200">
      <div class="card-body p-3">
        <div class="flex items-center gap-3">
          <button id="convertBtn" class="btn btn-primary flex-1 gap-2" disabled>
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg>
            Convert Document
          </button>
          <label class="label cursor-pointer gap-2 bg-base-300 rounded-lg px-3 py-1.5">
            <span class="label-text text-sm">Open when done</span>
            <input type="checkbox" id="openOnComplete" class="toggle toggle-primary toggle-sm" checked>
          </label>
          <!-- FAB Menu (inline) -->
          <div class="dropdown dropdown-top dropdown-end">
            <div tabindex="0" role="button" class="btn btn-circle btn-ghost">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"/></svg>
            </div>
            <ul tabindex="0" class="dropdown-content menu bg-base-300 rounded-box z-50 w-56 p-2 shadow-lg mb-2">
              <!-- Presets Submenu -->
              <li>
                <details>
                  <summary>
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"/></svg>
                    Presets
                  </summary>
                  <ul class="bg-base-200 rounded-box p-2 min-w-48">
                    <li class="mb-2">
                      <select id="presetSelect" class="select select-bordered select-sm w-full" size="4">
                        <option value="">Select preset...</option>
                      </select>
                    </li>
                    <li><a id="loadPreset">Load</a></li>
                    <li><a id="savePreset">Save New</a></li>
                    <li><a id="updatePreset">Update</a></li>
                    <li><a id="deletePreset" class="text-error">Delete</a></li>
                  </ul>
                </details>
              </li>
              <!-- Theme Submenu -->
              <li>
                <details>
                  <summary>
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"/></svg>
                    Theme
                  </summary>
                  <ul class="bg-base-200 rounded-box">
                    <li><a data-set-theme="dim">Dim</a></li>
                    <li><a data-set-theme="dark">Dark</a></li>
                    <li><a data-set-theme="nord">Nord</a></li>
                    <li><a data-set-theme="dracula">Dracula</a></li>
                    <li><a data-set-theme="sunset">Sunset</a></li>
                    <li><a data-set-theme="light">Light</a></li>
                  </ul>
                </details>
              </li>
              <li class="divider my-1"></li>
              <li><a id="fabCheckDeps"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg> Check Dependencies</a></li>
              <li><a id="fabResetDefaults"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg> Reset Defaults</a></li>
              <li><a id="fabCopyCmd"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg> Copy Command</a></li>
            </ul>
          </div>
        </div>

        <!-- Status Area -->
        <div id="statusArea" class="hidden mt-2">
          <div class="flex items-center gap-2">
            <progress id="progressBar" class="progress progress-primary flex-1 h-2"></progress>
            <span id="statusText" class="text-xs font-medium"></span>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Toast Container -->
  <div id="toastContainer" class="toast toast-end toast-bottom z-50"></div>


  <!-- Preset Save Modal -->
  <dialog id="presetModal" class="modal">
    <div class="modal-box">
      <h3 class="font-bold text-lg mb-4">Save Preset</h3>
      <div class="form-control">
        <label class="label">
          <span class="label-text">Preset Name</span>
        </label>
        <input type="text" id="presetNameInput" class="input input-bordered w-full" placeholder="Enter preset name...">
      </div>
      <div class="modal-action">
        <button id="presetSaveConfirm" class="btn btn-primary">Save</button>
        <form method="dialog">
          <button class="btn">Cancel</button>
        </form>
      </div>
    </div>
    <form method="dialog" class="modal-backdrop">
      <button>close</button>
    </form>
  </dialog>

  <!-- Dependency Check Modal -->
  <dialog id="depsModal" class="modal">
    <div class="modal-box">
      <h3 class="font-bold text-lg mb-4">Dependency Check</h3>
      <div id="depsResults" class="space-y-2">
        <div class="flex items-center justify-center py-4">
          <span class="loading loading-spinner loading-md"></span>
          <span class="ml-2">Checking dependencies...</span>
        </div>
      </div>
      <div class="modal-action">
        <form method="dialog">
          <button class="btn">Close</button>
        </form>
      </div>
    </div>
    <form method="dialog" class="modal-backdrop">
      <button>close</button>
    </form>
  </dialog>

  <script src="/src/main.js" type="module"></script>
</body>
</html>
