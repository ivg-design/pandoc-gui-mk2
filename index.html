<!DOCTYPE html>
<html lang="en" data-theme="dim">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pandoc GUI</title>
  <link rel="stylesheet" href="/src/style.css">
  <link rel="icon" href="/icon.png" type="image/png">
</head>
<body class="min-h-screen bg-base-100">
  <!-- Navbar -->
  <div class="navbar bg-base-200 shadow-sm px-4 min-h-12">
    <div class="flex-1 gap-2">
      <img src="/icon.png" alt="Pandoc GUI" class="w-6 h-6">
      <span class="font-bold">Pandoc GUI</span>
    </div>
    <div class="flex-none gap-2">
      <!-- Theme Dropdown -->
      <div class="dropdown dropdown-end">
        <button class="btn btn-ghost btn-sm" title="Theme">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor"><path d="M12 18C8.68629 18 6 15.3137 6 12C6 8.68629 8.68629 6 12 6C15.3137 6 18 8.68629 18 12C18 15.3137 15.3137 18 12 18ZM12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16ZM11 1H13V4H11V1ZM11 20H13V23H11V20ZM3.51472 4.92893L4.92893 3.51472L7.05025 5.63604L5.63604 7.05025L3.51472 4.92893ZM16.9497 18.364L18.364 16.9497L20.4853 19.0711L19.0711 20.4853L16.9497 18.364ZM19.0711 3.51472L20.4853 4.92893L18.364 7.05025L16.9497 5.63604L19.0711 3.51472ZM5.63604 16.9497L7.05025 18.364L4.92893 20.4853L3.51472 19.0711L5.63604 16.9497ZM23 11V13H20V11H23ZM4 11V13H1V11H4Z"/></svg>
        </button>
        <ul class="dropdown-content z-[1] menu p-2 shadow bg-base-300 rounded-box w-52">
          <li><a data-theme="dim" id="theme-dim">Dim (default)</a></li>
          <li><a data-theme="light" id="theme-light">Light</a></li>
          <li><a data-theme="dark" id="theme-dark">Dark</a></li>
          <li><a data-theme="cupcake" id="theme-cupcake">Cupcake</a></li>
        </ul>
      </div>
      <!-- Theme Toggle -->
      <label class="swap swap-rotate btn btn-ghost btn-sm btn-circle">
        <input type="checkbox" id="themeToggle" />
        <svg class="swap-on h-5 w-5 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.64,17l-.71.71a1,1,0,0,0,0,1.41,1,1,0,0,0,1.41,0l.71-.71A1,1,0,0,0,5.64,17ZM5,12a1,1,0,0,0-1-1H3a1,1,0,0,0,0,2H4A1,1,0,0,0,5,12Zm7-7a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V4A1,1,0,0,0,12,5ZM5.64,7.05a1,1,0,0,0,.7.29,1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.41l-.71-.71A1,1,0,0,0,4.93,6.34Zm12,.29a1,1,0,0,0,.7-.29l.71-.71a1,1,0,1,0-1.41-1.41L17,5.64a1,1,0,0,0,0,1.41A1,1,0,0,0,17.66,7.34ZM21,11H20a1,1,0,0,0,0,2h1a1,1,0,0,0,0-2Zm-9,8a1,1,0,0,0-1,1v1a1,1,0,0,0,2,0V20A1,1,0,0,0,12,19ZM18.36,17A1,1,0,0,0,17,18.36l.71.71a1,1,0,0,0,1.41,0,1,1,0,0,0,0-1.41ZM12,6.5A5.5,5.5,0,1,0,17.5,12,5.51,5.51,0,0,0,12,6.5Zm0,9A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"/></svg>
        <svg class="swap-off h-5 w-5 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21.64,13a1,1,0,0,0-1.05-.14,8.05,8.05,0,0,1-3.37.73A8.15,8.15,0,0,1,9.08,5.49a8.59,8.59,0,0,1,.25-2A1,1,0,0,0,8,2.36,10.14,10.14,0,1,0,22,14.05,1,1,0,0,0,21.64,13Zm-9.5,6.69A8.14,8.14,0,0,1,7.08,5.22v.27A10.15,10.15,0,0,0,17.22,15.63a9.79,9.79,0,0,0,2.1-.22A8.11,8.11,0,0,1,12.14,19.73Z"/></svg>
      </label>
    </div>
  </div>

  <!-- Main Content -->
  <div class="max-w-6xl mx-auto p-4 space-y-4">

    <!-- File I/O Section -->
    <div class="card bg-base-200 shadow">
      <div class="card-body p-4 space-y-3">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-3">
          <!-- Input File -->
          <div class="form-control">
            <label class="label py-1"><span class="label-text font-semibold">Input File</span></label>
            <div class="flex gap-2">
              <input type="text" id="inputPath" class="input input-bordered input-sm flex-1 font-mono text-xs" placeholder="Select input file..." readonly>
              <button id="browseInput" class="btn btn-sm btn-outline">Browse</button>
            </div>
            <input type="file" id="inputFile" class="hidden" accept=".md,.markdown,.rst,.tex,.latex,.docx,.doc,.html,.htm,.org,.txt,.adoc,.asciidoc,.epub,.odt,.rtf,.json,.yaml,.yml">
          </div>

          <!-- Output Path -->
          <div class="form-control">
            <label class="label py-1"><span class="label-text font-semibold">Output Path</span></label>
            <div class="flex gap-2">
              <input type="text" id="outputPath" class="input input-bordered input-sm flex-1 font-mono text-xs" placeholder="Output location...">
              <button id="browseOutput" class="btn btn-sm btn-outline">Browse</button>
            </div>
          </div>
        </div>

        <!-- Format & Output Style -->
        <div class="grid grid-cols-2 lg:grid-cols-3 gap-3">
          <div class="form-control">
            <label class="label py-1"><span class="label-text text-sm font-medium">Format</span></label>
            <select id="outputFormat" class="select select-bordered select-sm">
              <option value="pdf" selected>PDF</option>
              <option value="docx">Word (.docx)</option>
              <option value="odt">OpenDocument</option>
              <option value="html">HTML</option>
              <option value="epub">EPUB</option>
              <option value="latex">LaTeX</option>
              <option value="pptx">PowerPoint</option>
              <option value="markdown">Markdown</option>
              <option value="rst">reStructuredText</option>
              <option value="plain">Plain Text</option>
            </select>
          </div>
          <div class="form-control">
            <label class="label py-1"><span class="label-text text-sm font-medium">Output Style</span></label>
            <select id="outputTheme" class="select select-bordered select-sm">
              <option value="auto">Auto</option>
              <option value="light">Light</option>
              <option value="dark">Dark</option>
            </select>
          </div>
          <div class="form-control">
            <label class="label py-1"><span class="label-text text-sm font-medium">PDF Engine</span></label>
            <select id="pdfEngine" class="select select-bordered select-sm" style="display:none;">
              <option value="tectonic" selected>Tectonic</option>
              <option value="lualatex">LuaLaTeX</option>
              <option value="xelatex">XeLaTeX</option>
              <option value="pdflatex">pdfLaTeX</option>
              <option value="weasyprint">WeasyPrint</option>
            </select>
            <div id="pdfEngineWrapper"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Presets Section -->
    <div class="card bg-base-200 shadow">
      <div class="card-body p-4">
        <div class="flex gap-2 items-center flex-wrap">
          <select id="presetSelect" class="select select-bordered select-sm flex-1 min-w-48">
            <option value="">Select preset...</option>
          </select>
          <button id="loadPreset" class="btn btn-sm btn-outline" title="Load preset">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" /></svg>
            Load
          </button>
          <button id="savePreset" class="btn btn-sm btn-outline" title="Save current settings as preset">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4" /></svg>
            Save
          </button>
          <button id="updatePreset" class="btn btn-sm btn-outline" title="Update selected preset">
            Update
          </button>
          <button id="deletePreset" class="btn btn-sm btn-outline btn-error" title="Delete selected preset">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>
            Delete
          </button>
        </div>
      </div>
    </div>

    <!-- Tabs Section with Fixed Height -->
    <div class="card bg-base-200 shadow">
      <div class="card-body p-0">
        <div class="tabs tabs-box">
          <!-- Layout Tab -->
          <input type="radio" name="optionTabs" class="tab" aria-label="Layout" checked />
          <div class="tab-content bg-base-100 border-base-300 p-4 overflow-y-auto" style="height: 600px;">
            <div class="space-y-4">
              <!-- Paper Size, Orientation, Unit -->
              <div class="grid grid-cols-3 gap-2">
                <div class="form-control">
                  <label class="label py-0"><span class="label-text text-xs">Size</span></label>
                  <select id="paperSize" class="select select-bordered select-xs">
                    <option value="a4" selected>A4</option>
                    <option value="letter">Letter</option>
                    <option value="a5">A5</option>
                    <option value="legal">Legal</option>
                  </select>
                </div>
                <div class="form-control">
                  <label class="label py-0"><span class="label-text text-xs">Orientation</span></label>
                  <select id="orientation" class="select select-bordered select-xs">
                    <option value="portrait" selected>Portrait</option>
                    <option value="landscape">Landscape</option>
                  </select>
                </div>
                <div class="form-control">
                  <label class="label py-0"><span class="label-text text-xs">Unit</span></label>
                  <select id="marginUnit" class="select select-bordered select-xs">
                    <option value="in" selected>inches</option>
                    <option value="cm">cm</option>
                    <option value="mm">mm</option>
                  </select>
                </div>
              </div>

              <div class="divider my-2"></div>

              <!-- Margins -->
              <div class="flex items-center gap-2">
                <label class="label py-0 cursor-pointer gap-1">
                  <input type="checkbox" id="uniformMargins" class="checkbox checkbox-sm" checked>
                  <span class="label-text text-xs">Uniform margins</span>
                </label>
              </div>

              <div id="uniformMarginInput" class="form-control">
                <div class="flex items-center gap-2">
                  <span class="text-xs w-20">All sides:</span>
                  <input type="number" id="marginAll" class="input input-bordered input-xs flex-1" value="1" step="0.25" min="0">
                </div>
              </div>

              <div id="individualMargins" class="grid grid-cols-2 gap-2 hidden">
                <div class="flex items-center gap-2">
                  <span class="text-xs w-12">Top:</span>
                  <input type="number" id="marginTop" class="input input-bordered input-xs flex-1" value="1" step="0.25" min="0">
                </div>
                <div class="flex items-center gap-2">
                  <span class="text-xs w-12">Bottom:</span>
                  <input type="number" id="marginBottom" class="input input-bordered input-xs flex-1" value="1" step="0.25" min="0">
                </div>
                <div class="flex items-center gap-2">
                  <span class="text-xs w-12">Left:</span>
                  <input type="number" id="marginLeft" class="input input-bordered input-xs flex-1" value="1" step="0.25" min="0">
                </div>
                <div class="flex items-center gap-2">
                  <span class="text-xs w-12">Right:</span>
                  <input type="number" id="marginRight" class="input input-bordered input-xs flex-1" value="1" step="0.25" min="0">
                </div>
              </div>

              <div class="divider my-2"></div>

              <!-- Font Size & Line Height -->
              <div class="grid grid-cols-2 gap-2">
                <div class="form-control">
                  <label class="label py-0"><span class="label-text text-xs">Font Size</span></label>
                  <div class="flex gap-1">
                    <input type="number" id="fontSize" class="input input-bordered input-xs flex-1" value="12" min="6" max="72" step="0.5">
                    <span class="text-xs self-center">pt</span>
                  </div>
                </div>
                <div class="form-control">
                  <label class="label py-0"><span class="label-text text-xs">Line Height</span></label>
                  <select id="lineHeight" class="select select-bordered select-xs">
                    <option value="1">Single</option>
                    <option value="1.15">1.15</option>
                    <option value="1.5" selected>1.5</option>
                    <option value="2">Double</option>
                  </select>
                </div>
              </div>

              <div class="divider my-2"></div>

              <!-- Document Class -->
              <div class="form-control">
                <label class="label py-0"><span class="label-text text-xs">Document Class</span></label>
                <select id="documentClass" class="select select-bordered select-xs">
                  <option value="article">Article</option>
                  <option value="report">Report</option>
                  <option value="book">Book</option>
                  <option value="memoir">Memoir</option>
                  <option value="scrartcl">KOMA Article</option>
                </select>
              </div>
            </div>
          </div>

          <!-- Typography Tab -->
          <input type="radio" name="optionTabs" class="tab" aria-label="Typography" />
          <div class="tab-content bg-base-100 border-base-300 p-4 overflow-y-auto" style="height: 600px;">
            <div class="space-y-4">
              <div class="grid grid-cols-2 gap-2">
                <div class="form-control">
                  <label class="label py-0"><span class="label-text text-xs font-medium">Main Font</span></label>
                  <select id="mainFont" class="select select-bordered select-xs">
                    <option value="">System Default</option>
                  </select>
                </div>
                <div class="form-control">
                  <label class="label py-0"><span class="label-text text-xs font-medium">Mono Font</span></label>
                  <select id="monoFont" class="select select-bordered select-xs">
                    <option value="">System Default</option>
                  </select>
                </div>
              </div>

              <div class="divider my-2"></div>

              <div class="form-control">
                <label class="label py-0"><span class="label-text text-xs font-medium">Syntax Theme</span></label>
                <select id="highlightTheme" class="select select-bordered select-xs w-full">
                  <optgroup label="Light">
                    <option value="pygments">Pygments</option>
                    <option value="kate">Kate</option>
                    <option value="tango">Tango</option>
                    <option value="espresso">Espresso</option>
                  </optgroup>
                  <optgroup label="Dark">
                    <option value="breezedark" selected>Breeze Dark</option>
                    <option value="zenburn">Zenburn</option>
                    <option value="nord">Nord</option>
                    <option value="dracula">Dracula</option>
                    <option value="monokai">Monokai</option>
                    <option value="gruvbox-dark">Gruvbox Dark</option>
                    <option value="solarized-dark">Solarized Dark</option>
                  </optgroup>
                </select>
              </div>

              <!-- Code Preview -->
              <div id="codePreview" class="rounded text-xs font-mono p-3 mt-2 overflow-hidden border border-base-300">
                <div><span class="cm">// Greeting function</span></div>
                <div><span class="kw">function</span> <span class="fn">hello</span>() {</div>
                <div>  <span class="kw">const</span> msg = <span class="st">"Hello"</span>;</div>
                <div>  <span class="kw">return</span> msg; <span class="cm">// result</span></div>
                <div>}</div>
              </div>

              <div class="flex items-center gap-4 mt-2">
                <label class="label py-0 cursor-pointer gap-1">
                  <input type="checkbox" id="lineNumbers" class="checkbox checkbox-xs">
                  <span class="label-text text-xs">Line numbers</span>
                </label>
                <label class="label py-0 cursor-pointer gap-1">
                  <input type="checkbox" id="codeBlockBg" class="checkbox checkbox-xs" checked>
                  <span class="label-text text-xs">Background</span>
                </label>
              </div>

              <div id="bgColorPicker" class="flex items-center gap-2">
                <span class="text-xs">BG Color:</span>
                <input type="color" id="codeBlockBgColor" class="w-10 h-8 rounded cursor-pointer border-0" value="#282a36">
              </div>
            </div>
          </div>

          <!-- Document Tab -->
          <input type="radio" name="optionTabs" class="tab" aria-label="Document" />
          <div class="tab-content bg-base-100 border-base-300 p-4 overflow-y-auto" style="height: 600px;">
            <div class="space-y-4">
              <div>
                <h3 class="text-sm font-semibold mb-2">Structure Options</h3>
                <div class="grid grid-cols-2 gap-2">
                  <label class="label py-1 cursor-pointer justify-start gap-2">
                    <input type="checkbox" id="titlePage" class="checkbox checkbox-xs">
                    <span class="label-text text-xs">Title Page</span>
                    <div class="tooltip tooltip-right" data-tip="Creates a separate title page with title, author, and date centered. Use metadata fields below to set values.">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-info cursor-help" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    </div>
                  </label>
                  <label class="label py-1 cursor-pointer justify-start gap-2">
                    <input type="checkbox" id="toc" class="checkbox checkbox-xs">
                    <span class="label-text text-xs">Table of Contents</span>
                    <div class="tooltip tooltip-right" data-tip="Auto-generates a clickable TOC from headings in your document.">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-info cursor-help" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    </div>
                  </label>
                  <label class="label py-1 cursor-pointer justify-start gap-2">
                    <input type="checkbox" id="lof" class="checkbox checkbox-xs">
                    <span class="label-text text-xs">List of Figures</span>
                    <div class="tooltip tooltip-right" data-tip="Requires: Images with captions. Use: ![caption](image.png). LaTeX readers insert a caption.">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-info cursor-help" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    </div>
                  </label>
                  <label class="label py-1 cursor-pointer justify-start gap-2">
                    <input type="checkbox" id="lot" class="checkbox checkbox-xs">
                    <span class="label-text text-xs">List of Tables</span>
                    <div class="tooltip tooltip-right" data-tip="Requires: Tables with captions. Use pandoc table syntax with captions.">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-info cursor-help" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    </div>
                  </label>
                  <label class="label py-1 cursor-pointer justify-start gap-2">
                    <input type="checkbox" id="numberSections" class="checkbox checkbox-xs">
                    <span class="label-text text-xs">Number Sections</span>
                    <div class="tooltip tooltip-right" data-tip="Automatically numbers all sections: 1. Intro, 1.1 Background...">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-info cursor-help" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    </div>
                  </label>
                  <label id="standaloneLabel" class="label py-1 cursor-pointer justify-start gap-2 hidden">
                    <input type="checkbox" id="standalone" class="checkbox checkbox-xs" checked>
                    <span class="label-text text-xs">Standalone</span>
                    <div class="tooltip tooltip-right" data-tip="Complete HTML/LaTeX with doctype and headers. Disable to create a fragment for embedding.">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-info cursor-help" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    </div>
                  </label>
                </div>
              </div>

              <!-- TOC Options -->
              <div id="tocOptions" class="hidden space-y-2 pl-3 border-l-2 border-primary/30">
                <div class="flex items-center gap-3">
                  <span class="text-xs w-24">TOC Depth:</span>
                  <input type="range" id="tocDepth" min="1" max="6" value="3" class="range range-xs range-primary flex-1">
                  <span id="tocDepthValue" class="text-xs w-4">3</span>
                </div>
                <label class="label py-0 cursor-pointer justify-start gap-2">
                  <input type="checkbox" id="tocNewPage" class="checkbox checkbox-xs">
                  <span class="label-text text-xs">New page after TOC</span>
                </label>
              </div>

              <div class="divider my-2"></div>

              <!-- Top-level division -->
              <div class="form-control">
                <div class="flex items-center gap-2">
                  <label class="label py-0"><span class="label-text text-xs">Top-Level Headings</span></label>
                  <div class="tooltip tooltip-right" data-tip="Controls how H1 headings are rendered: Chapter (page breaks), Section (inline), or Part (major divisions).">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-info cursor-help" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                  </div>
                </div>
                <select id="topLevelDiv" class="select select-bordered select-xs w-full mt-1">
                  <option value="default" selected>Default</option>
                  <option value="part">Part</option>
                  <option value="chapter">Chapter</option>
                  <option value="section">Section</option>
                </select>
              </div>
            </div>
          </div>

          <!-- Content Tab -->
          <input type="radio" name="optionTabs" class="tab" aria-label="Content" />
          <div class="tab-content bg-base-100 border-base-300 p-4 overflow-y-auto" style="height: 600px;">
            <div class="space-y-4">
              <!-- Shared Tokens Reference -->
              <div class="text-xs bg-base-300 rounded p-2">
                <div class="font-semibold mb-1">Available tokens:</div>
                <div class="grid grid-cols-2 gap-x-2 gap-y-0.5 text-base-content/80">
                  <span><code class="bg-base-100 px-1 rounded text-xs">{today}</code> Today</span>
                  <span><code class="bg-base-100 px-1 rounded text-xs">{year}</code> Year</span>
                  <span><code class="bg-base-100 px-1 rounded text-xs">{file}</code> Filename</span>
                  <span><code class="bg-base-100 px-1 rounded text-xs">{user}</code> Username</span>
                  <span><code class="bg-base-100 px-1 rounded text-xs">{title}</code> Doc title</span>
                  <span><code class="bg-base-100 px-1 rounded text-xs">{author}</code> Author</span>
                  <span><code class="bg-base-100 px-1 rounded text-xs">{date}</code> Doc date</span>
                  <span><code class="bg-base-100 px-1 rounded text-xs">{page}</code> Page #</span>
                </div>
              </div>

              <!-- Headers/Footers Grid -->
              <div>
                <h3 class="text-sm font-semibold mb-2">Headers & Footers</h3>
                <div class="grid grid-cols-3 gap-2">
                  <div class="form-control">
                    <label class="label py-0"><span class="label-text text-xs">Left</span></label>
                    <input type="text" id="headerLeft" class="input input-bordered input-xs w-full font-mono" placeholder="{title}">
                  </div>
                  <div class="form-control">
                    <label class="label py-0"><span class="label-text text-xs">Center</span></label>
                    <input type="text" id="headerCenter" class="input input-bordered input-xs w-full font-mono" placeholder="">
                  </div>
                  <div class="form-control">
                    <label class="label py-0"><span class="label-text text-xs">Right</span></label>
                    <input type="text" id="headerRight" class="input input-bordered input-xs w-full font-mono" placeholder="{page}">
                  </div>
                </div>
                <div class="text-xs text-base-content/60 mt-1 mb-2">Header fields</div>

                <div class="grid grid-cols-3 gap-2">
                  <div class="form-control">
                    <label class="label py-0"><span class="label-text text-xs">Left</span></label>
                    <input type="text" id="footerLeft" class="input input-bordered input-xs w-full font-mono" placeholder="{author}">
                  </div>
                  <div class="form-control">
                    <label class="label py-0"><span class="label-text text-xs">Center</span></label>
                    <input type="text" id="footerCenter" class="input input-bordered input-xs w-full font-mono" placeholder="Page {page}">
                  </div>
                  <div class="form-control">
                    <label class="label py-0"><span class="label-text text-xs">Right</span></label>
                    <input type="text" id="footerRight" class="input input-bordered input-xs w-full font-mono" placeholder="{date}">
                  </div>
                </div>
                <div class="text-xs text-base-content/60 mt-1">Footer fields</div>
              </div>

              <div class="divider my-2"></div>

              <!-- Page Numbering & Metadata -->
              <div class="grid grid-cols-3 gap-2">
                <div class="form-control">
                  <label class="label py-0"><span class="label-text text-xs">Page Format</span></label>
                  <select id="pageNumberFormat" class="select select-bordered select-xs w-full">
                    <option value="page" selected>Page N</option>
                    <option value="page-of">Page N of X</option>
                    <option value="number">N</option>
                  </select>
                </div>
                <div class="form-control">
                  <label class="label py-0"><span class="label-text text-xs">Position</span></label>
                  <select id="pageNumberPosition" class="select select-bordered select-xs w-full">
                    <option value="bottom-center" selected>Bottom Center</option>
                    <option value="bottom-right">Bottom Right</option>
                    <option value="top-right">Top Right</option>
                  </select>
                </div>
                <div class="form-control">
                  <label class="label py-0"><span class="label-text text-xs">Style</span></label>
                  <select id="pageNumberStyle" class="select select-bordered select-xs w-full">
                    <option value="arabic" selected>1, 2, 3</option>
                    <option value="roman">i, ii, iii</option>
                    <option value="Roman">I, II, III</option>
                  </select>
                </div>
              </div>

              <div class="divider my-2"></div>

              <!-- Metadata -->
              <div>
                <h3 class="text-sm font-semibold mb-2">Document Metadata</h3>
                <div class="grid grid-cols-1 gap-2">
                  <div class="form-control">
                    <label class="label py-0"><span class="label-text text-xs">Title</span></label>
                    <input type="text" id="docTitle" class="input input-bordered input-xs w-full" placeholder="{file}">
                  </div>
                  <div class="form-control">
                    <label class="label py-0"><span class="label-text text-xs">Author</span></label>
                    <input type="text" id="docAuthor" class="input input-bordered input-xs w-full" placeholder="{user}">
                  </div>
                  <div class="form-control">
                    <label class="label py-0"><span class="label-text text-xs">Date</span></label>
                    <input type="text" id="docDate" class="input input-bordered input-xs w-full" placeholder="{today}">
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Advanced Tab -->
          <input type="radio" name="optionTabs" class="tab" aria-label="Advanced" />
          <div class="tab-content bg-base-100 border-base-300 p-4 overflow-y-auto" style="height: 600px;">
            <div class="space-y-4">
              <!-- Mermaid -->
              <div>
                <div class="flex items-center gap-2 mb-2">
                  <span class="text-sm font-semibold">Mermaid Diagrams</span>
                  <span id="mermaidDetected" class="badge badge-xs badge-ghost hidden">detected</span>
                </div>
                <div class="flex items-center gap-3">
                  <label class="label py-0 cursor-pointer gap-1">
                    <input type="radio" name="mermaidFormat" value="svg" class="radio radio-xs" checked>
                    <span class="label-text text-xs">SVG</span>
                  </label>
                  <label class="label py-0 cursor-pointer gap-1">
                    <input type="radio" name="mermaidFormat" value="png" class="radio radio-xs">
                    <span class="label-text text-xs">PNG</span>
                  </label>
                </div>
              </div>

              <div class="divider my-2"></div>

              <!-- Processing Filters -->
              <div>
                <span class="text-sm font-semibold">Processing Filters</span>
                <div class="flex flex-col gap-2 mt-2">
                  <label class="label py-0 cursor-pointer justify-start gap-2">
                    <input type="checkbox" id="filterCrossref" class="checkbox checkbox-xs">
                    <span class="label-text text-xs">pandoc-crossref</span>
                    <div class="tooltip tooltip-right" data-tip="Use @fig:name for figures, @eq:name for equations, @sec:name for sections. Label items with {#fig:name}.">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-info cursor-help" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    </div>
                  </label>
                  <label class="label py-0 cursor-pointer justify-start gap-2">
                    <input type="checkbox" id="filterCiteproc" class="checkbox checkbox-xs">
                    <span class="label-text text-xs">citeproc</span>
                    <div class="tooltip tooltip-right" data-tip="Process citations and bibliographies. Use [@key] to cite. Requires .bib file and bibliography.csl.">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-info cursor-help" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    </div>
                  </label>
                </div>
              </div>

              <div class="divider my-2"></div>

              <!-- Extra Arguments -->
              <div class="form-control">
                <div class="flex items-center gap-2">
                  <label class="label py-0"><span class="label-text text-xs">Extra Arguments</span></label>
                  <div class="tooltip tooltip-right" data-tip="Additional pandoc flags. Examples: --shift-heading-level-by=-1, --wrap=none, --columns=80">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-info cursor-help" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                  </div>
                </div>
                <input type="text" id="extraArgs" class="input input-bordered input-xs font-mono mt-1" placeholder="--wrap=none">
              </div>

              <div class="divider my-2"></div>

              <!-- Link Colors -->
              <div class="flex items-center gap-3">
                <label class="label py-0 cursor-pointer gap-1">
                  <input type="checkbox" id="colorLinks" class="checkbox checkbox-xs" checked>
                  <span class="label-text text-xs">Colored links</span>
                </label>
              </div>
              <div class="flex items-center gap-2">
                <span class="text-xs">Link color:</span>
                <input type="color" id="linkColor" class="w-10 h-8 rounded cursor-pointer border-0" value="#0066cc">
              </div>
            </div>
          </div>

          <!-- Command Reference Tab -->
          <input type="radio" name="optionTabs" class="tab" aria-label="Command" />
          <div class="tab-content bg-base-100 border-base-300 p-4 overflow-y-auto" style="height: 600px;">
            <div class="space-y-3">
              <h3 class="text-sm font-semibold">Pandoc Command</h3>
              <code id="commandPreview" class="block p-3 bg-base-300 rounded text-xs font-mono overflow-x-auto whitespace-pre-wrap break-words" style="max-height: 300px;">pandoc input.md -o output.pdf</code>
              <button id="copyCmd" class="btn btn-sm btn-outline w-full">Copy to Clipboard</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Convert Section -->
    <div class="card bg-base-200 shadow">
      <div class="card-body p-4 space-y-3">
        <div class="flex gap-2">
          <button id="convertBtn" class="btn btn-primary btn-lg flex-1 gap-2" disabled>
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" /></svg>
            Convert
          </button>
          <label class="label py-0 cursor-pointer gap-1 text-xs self-center">
            <input type="checkbox" id="openOnComplete" class="checkbox checkbox-sm" checked>
            <span>Open</span>
          </label>
        </div>

        <div id="statusArea" class="hidden">
          <progress id="progressBar" class="progress progress-primary w-full h-2"></progress>
          <p id="statusText" class="text-center text-sm mt-2"></p>
        </div>
      </div>
    </div>

  </div>

  <!-- Toast Notifications -->
  <div id="toastContainer" class="toast toast-end toast-bottom"></div>

  <script src="/src/main.js" type="module"></script>
</body>
</html>
