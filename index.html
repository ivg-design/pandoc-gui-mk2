<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pandoc GUI</title>
  <link rel="stylesheet" href="/src/style.css">
  <link rel="icon" href="/icon.png" type="image/png">
</head>
<body class="min-h-screen bg-base-100">
  <!-- Compact Header -->
  <div class="navbar bg-base-200 shadow-sm px-4 min-h-12">
    <div class="flex-1 gap-2">
      <img src="/icon.png" alt="Pandoc GUI" class="w-6 h-6">
      <span class="font-bold">Pandoc GUI</span>
    </div>
    <div class="flex-none">
      <label class="swap swap-rotate btn btn-ghost btn-sm btn-circle">
        <input type="checkbox" id="themeToggle" />
        <svg class="swap-on h-5 w-5 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.64,17l-.71.71a1,1,0,0,0,0,1.41,1,1,0,0,0,1.41,0l.71-.71A1,1,0,0,0,5.64,17ZM5,12a1,1,0,0,0-1-1H3a1,1,0,0,0,0,2H4A1,1,0,0,0,5,12Zm7-7a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V4A1,1,0,0,0,12,5ZM5.64,7.05a1,1,0,0,0,.7.29,1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.41l-.71-.71A1,1,0,0,0,4.93,6.34Zm12,.29a1,1,0,0,0,.7-.29l.71-.71a1,1,0,1,0-1.41-1.41L17,5.64a1,1,0,0,0,0,1.41A1,1,0,0,0,17.66,7.34ZM21,11H20a1,1,0,0,0,0,2h1a1,1,0,0,0,0-2Zm-9,8a1,1,0,0,0-1,1v1a1,1,0,0,0,2,0V20A1,1,0,0,0,12,19ZM18.36,17A1,1,0,0,0,17,18.36l.71.71a1,1,0,0,0,1.41,0,1,1,0,0,0,0-1.41ZM12,6.5A5.5,5.5,0,1,0,17.5,12,5.51,5.51,0,0,0,12,6.5Zm0,9A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"/></svg>
        <svg class="swap-off h-5 w-5 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21.64,13a1,1,0,0,0-1.05-.14,8.05,8.05,0,0,1-3.37.73A8.15,8.15,0,0,1,9.08,5.49a8.59,8.59,0,0,1,.25-2A1,1,0,0,0,8,2.36,10.14,10.14,0,1,0,22,14.05,1,1,0,0,0,21.64,13Zm-9.5,6.69A8.14,8.14,0,0,1,7.08,5.22v.27A10.15,10.15,0,0,0,17.22,15.63a9.79,9.79,0,0,0,2.1-.22A8.11,8.11,0,0,1,12.14,19.73Z"/></svg>
      </label>
    </div>
  </div>

  <!-- Main Content - Single Column -->
  <div class="max-w-xl mx-auto p-3 space-y-3">

    <!-- File I/O Section -->
    <div class="card bg-base-200 shadow">
      <div class="card-body p-4 space-y-3">
        <!-- Input File -->
        <div class="form-control">
          <label class="label py-1"><span class="label-text font-semibold">Input File</span></label>
          <div class="flex gap-2">
            <input type="text" id="inputPath" class="input input-bordered input-sm flex-1 font-mono text-xs" placeholder="Select input file..." readonly>
            <button id="browseInput" class="btn btn-sm btn-outline">Browse</button>
          </div>
          <input type="file" id="inputFile" class="hidden" accept=".md,.markdown,.rst,.tex,.latex,.docx,.doc,.html,.htm,.org,.txt,.adoc,.asciidoc,.epub,.odt,.rtf,.json,.yaml,.yml">
        </div>

        <!-- Output File -->
        <div class="form-control">
          <label class="label py-1"><span class="label-text font-semibold">Output</span></label>
          <div class="flex gap-2">
            <input type="text" id="outputPath" class="input input-bordered input-sm flex-1 font-mono text-xs" placeholder="Output location...">
            <button id="browseOutput" class="btn btn-sm btn-outline">Browse</button>
          </div>
        </div>

        <!-- Output Format -->
        <div class="grid grid-cols-2 gap-2">
          <div class="form-control">
            <label class="label py-1"><span class="label-text text-xs">Format</span></label>
            <select id="outputFormat" class="select select-bordered select-sm">
              <option value="pdf" selected>PDF</option>
              <option value="docx">Word (.docx)</option>
              <option value="odt">OpenDocument</option>
              <option value="html">HTML</option>
              <option value="epub">EPUB</option>
              <option value="latex">LaTeX</option>
              <option value="pptx">PowerPoint</option>
              <option value="markdown">Markdown</option>
              <option value="rst">reStructuredText</option>
              <option value="plain">Plain Text</option>
            </select>
          </div>
          <div class="form-control">
            <label class="label py-1"><span class="label-text text-xs">Output Style</span></label>
            <select id="outputTheme" class="select select-bordered select-sm">
              <option value="auto">Auto (match app)</option>
              <option value="light">Light Mode</option>
              <option value="dark">Dark Mode</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <!-- PDF Engine (collapsible, shown for PDF) -->
    <div id="pdfEngineSection" class="collapse collapse-arrow bg-base-200 shadow">
      <input type="checkbox" checked>
      <div class="collapse-title py-2 px-4 min-h-0 font-semibold text-sm">PDF Engine</div>
      <div class="collapse-content px-4 pb-3">
        <select id="pdfEngine" class="select select-bordered select-sm w-full">
          <option value="tectonic" selected>Tectonic (emojis, auto-packages)</option>
          <option value="lualatex">LuaLaTeX (modern Unicode)</option>
          <option value="xelatex">XeLaTeX (custom fonts)</option>
          <option value="pdflatex">pdfLaTeX (classic)</option>
          <option value="weasyprint">WeasyPrint (HTML-based)</option>
        </select>
        <p class="text-xs text-base-content/60 mt-1">Tectonic recommended for emoji and multilingual support</p>
      </div>
    </div>

    <!-- Page Layout -->
    <div class="collapse collapse-arrow bg-base-200 shadow">
      <input type="checkbox" checked>
      <div class="collapse-title py-2 px-4 min-h-0 font-semibold text-sm">Page Layout</div>
      <div class="collapse-content px-4 pb-3 space-y-2">
        <div class="grid grid-cols-3 gap-2">
          <div class="form-control">
            <label class="label py-0"><span class="label-text text-xs">Size</span></label>
            <select id="paperSize" class="select select-bordered select-xs">
              <option value="a4" selected>A4</option>
              <option value="letter">Letter</option>
              <option value="a5">A5</option>
              <option value="legal">Legal</option>
            </select>
          </div>
          <div class="form-control">
            <label class="label py-0"><span class="label-text text-xs">Orientation</span></label>
            <select id="orientation" class="select select-bordered select-xs">
              <option value="portrait" selected>Portrait</option>
              <option value="landscape">Landscape</option>
            </select>
          </div>
          <div class="form-control">
            <label class="label py-0"><span class="label-text text-xs">Unit</span></label>
            <select id="marginUnit" class="select select-bordered select-xs">
              <option value="in" selected>inches</option>
              <option value="cm">cm</option>
              <option value="mm">mm</option>
            </select>
          </div>
        </div>

        <!-- Margins -->
        <div class="flex items-center gap-2 mt-2">
          <label class="label py-0 cursor-pointer gap-1">
            <input type="checkbox" id="uniformMargins" class="checkbox checkbox-xs" checked>
            <span class="label-text text-xs">Uniform margins</span>
          </label>
        </div>
        <div id="uniformMarginInput" class="form-control">
          <div class="flex items-center gap-2">
            <span class="text-xs w-16">All sides:</span>
            <input type="number" id="marginAll" class="input input-bordered input-xs w-20" value="1" step="0.25" min="0">
          </div>
        </div>
        <div id="individualMargins" class="grid grid-cols-2 gap-2 hidden">
          <div class="flex items-center gap-1">
            <span class="text-xs w-12">Top:</span>
            <input type="number" id="marginTop" class="input input-bordered input-xs w-16" value="1" step="0.25" min="0">
          </div>
          <div class="flex items-center gap-1">
            <span class="text-xs w-12">Bottom:</span>
            <input type="number" id="marginBottom" class="input input-bordered input-xs w-16" value="1" step="0.25" min="0">
          </div>
          <div class="flex items-center gap-1">
            <span class="text-xs w-12">Left:</span>
            <input type="number" id="marginLeft" class="input input-bordered input-xs w-16" value="1" step="0.25" min="0">
          </div>
          <div class="flex items-center gap-1">
            <span class="text-xs w-12">Right:</span>
            <input type="number" id="marginRight" class="input input-bordered input-xs w-16" value="1" step="0.25" min="0">
          </div>
        </div>
      </div>
    </div>

    <!-- Header/Footer & Page Numbers -->
    <div class="collapse collapse-arrow bg-base-200 shadow">
      <input type="checkbox">
      <div class="collapse-title py-2 px-4 min-h-0 font-semibold text-sm">Header, Footer & Page Numbers</div>
      <div class="collapse-content px-4 pb-3 space-y-2">
        <div class="form-control">
          <label class="label py-0"><span class="label-text text-xs">Header Left</span></label>
          <input type="text" id="headerLeft" class="input input-bordered input-xs" placeholder="e.g., Document Title">
        </div>
        <div class="form-control">
          <label class="label py-0"><span class="label-text text-xs">Header Center</span></label>
          <input type="text" id="headerCenter" class="input input-bordered input-xs" placeholder="">
        </div>
        <div class="form-control">
          <label class="label py-0"><span class="label-text text-xs">Header Right</span></label>
          <input type="text" id="headerRight" class="input input-bordered input-xs" placeholder="e.g., \\thepage">
        </div>
        <div class="divider my-1 text-xs">Footer</div>
        <div class="form-control">
          <label class="label py-0"><span class="label-text text-xs">Footer Left</span></label>
          <input type="text" id="footerLeft" class="input input-bordered input-xs" placeholder="">
        </div>
        <div class="form-control">
          <label class="label py-0"><span class="label-text text-xs">Footer Center</span></label>
          <input type="text" id="footerCenter" class="input input-bordered input-xs" placeholder="e.g., Page \\thepage">
        </div>
        <div class="form-control">
          <label class="label py-0"><span class="label-text text-xs">Footer Right</span></label>
          <input type="text" id="footerRight" class="input input-bordered input-xs" placeholder="">
        </div>
        <div class="divider my-1 text-xs">Page Numbering</div>
        <div class="grid grid-cols-2 gap-2">
          <div class="form-control">
            <label class="label py-0"><span class="label-text text-xs">Style</span></label>
            <select id="pageNumberStyle" class="select select-bordered select-xs">
              <option value="arabic" selected>1, 2, 3...</option>
              <option value="roman">i, ii, iii...</option>
              <option value="Roman">I, II, III...</option>
              <option value="alph">a, b, c...</option>
              <option value="Alph">A, B, C...</option>
            </select>
          </div>
          <div class="form-control">
            <label class="label py-0"><span class="label-text text-xs">Position</span></label>
            <select id="pageNumberPosition" class="select select-bordered select-xs">
              <option value="bottom-center" selected>Bottom Center</option>
              <option value="bottom-right">Bottom Right</option>
              <option value="top-right">Top Right</option>
              <option value="none">No Numbers</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <!-- Typography -->
    <div class="collapse collapse-arrow bg-base-200 shadow">
      <input type="checkbox" checked>
      <div class="collapse-title py-2 px-4 min-h-0 font-semibold text-sm">Typography</div>
      <div class="collapse-content px-4 pb-3 space-y-2">
        <div class="grid grid-cols-2 gap-2">
          <div class="form-control">
            <label class="label py-0"><span class="label-text text-xs">Main Font</span></label>
            <select id="mainFont" class="select select-bordered select-xs">
              <option value="">System Default</option>
            </select>
          </div>
          <div class="form-control">
            <label class="label py-0"><span class="label-text text-xs">Mono Font</span></label>
            <select id="monoFont" class="select select-bordered select-xs">
              <option value="">System Default</option>
            </select>
          </div>
        </div>
        <div class="grid grid-cols-2 gap-2">
          <div class="form-control">
            <label class="label py-0"><span class="label-text text-xs">Font Size</span></label>
            <div class="flex gap-1">
              <input type="number" id="fontSize" class="input input-bordered input-xs w-16" value="12" min="6" max="72" step="0.5">
              <span class="text-xs self-center">pt</span>
            </div>
          </div>
          <div class="form-control">
            <label class="label py-0"><span class="label-text text-xs">Line Height</span></label>
            <select id="lineHeight" class="select select-bordered select-xs">
              <option value="1">Single</option>
              <option value="1.15">1.15</option>
              <option value="1.5" selected>1.5</option>
              <option value="2">Double</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <!-- Code Highlighting -->
    <div class="collapse collapse-arrow bg-base-200 shadow">
      <input type="checkbox" checked>
      <div class="collapse-title py-2 px-4 min-h-0 font-semibold text-sm">Code Highlighting</div>
      <div class="collapse-content px-4 pb-3 space-y-2">
        <div class="form-control">
          <label class="label py-0"><span class="label-text text-xs">Syntax Theme</span></label>
          <select id="highlightTheme" class="select select-bordered select-xs w-full">
            <optgroup label="Light">
              <option value="pygments">Pygments</option>
              <option value="kate">Kate</option>
              <option value="tango">Tango</option>
              <option value="espresso">Espresso</option>
            </optgroup>
            <optgroup label="Dark">
              <option value="breezedark" selected>Breeze Dark</option>
              <option value="zenburn">Zenburn</option>
              <option value="nord">Nord</option>
              <option value="dracula">Dracula</option>
              <option value="monokai">Monokai</option>
              <option value="gruvbox-dark">Gruvbox Dark</option>
              <option value="solarized-dark">Solarized Dark</option>
            </optgroup>
          </select>
        </div>

        <!-- Code Preview -->
        <div id="codePreview" class="rounded text-xs font-mono p-2 mt-2 overflow-hidden">
          <div><span class="kw">function</span> <span class="fn">hello</span>() {</div>
          <div>  <span class="kw">const</span> msg = <span class="st">"Hello"</span>;</div>
          <div>  <span class="kw">return</span> msg;</div>
          <div>}</div>
        </div>

        <div class="flex items-center gap-4 mt-2">
          <label class="label py-0 cursor-pointer gap-1">
            <input type="checkbox" id="lineNumbers" class="checkbox checkbox-xs">
            <span class="label-text text-xs">Line numbers</span>
          </label>
          <label class="label py-0 cursor-pointer gap-1">
            <input type="checkbox" id="codeBlockBg" class="checkbox checkbox-xs" checked>
            <span class="label-text text-xs">Background</span>
          </label>
        </div>

        <div id="bgColorPicker" class="flex items-center gap-2">
          <span class="text-xs">Background color:</span>
          <input type="color" id="codeBlockBgColor" class="w-8 h-6 rounded cursor-pointer border-0" value="#282a36">
        </div>
      </div>
    </div>

    <!-- Document Structure -->
    <div class="collapse collapse-arrow bg-base-200 shadow">
      <input type="checkbox">
      <div class="collapse-title py-2 px-4 min-h-0 font-semibold text-sm">Document Structure</div>
      <div class="collapse-content px-4 pb-3 space-y-2">
        <div class="flex flex-wrap gap-x-4 gap-y-1">
          <label class="label py-0 cursor-pointer gap-1">
            <input type="checkbox" id="toc" class="checkbox checkbox-xs">
            <span class="label-text text-xs">Table of Contents</span>
          </label>
          <label class="label py-0 cursor-pointer gap-1">
            <input type="checkbox" id="numberSections" class="checkbox checkbox-xs">
            <span class="label-text text-xs">Number Sections</span>
          </label>
          <label class="label py-0 cursor-pointer gap-1">
            <input type="checkbox" id="standalone" class="checkbox checkbox-xs" checked>
            <span class="label-text text-xs">Standalone</span>
          </label>
        </div>
        <div id="tocDepthSection" class="hidden">
          <div class="flex items-center gap-2">
            <span class="text-xs">TOC Depth:</span>
            <input type="range" id="tocDepth" min="1" max="6" value="3" class="range range-xs range-primary w-32">
            <span id="tocDepthValue" class="text-xs">3</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Metadata -->
    <div class="collapse collapse-arrow bg-base-200 shadow">
      <input type="checkbox">
      <div class="collapse-title py-2 px-4 min-h-0 font-semibold text-sm">Metadata</div>
      <div class="collapse-content px-4 pb-3 space-y-2">
        <div class="form-control">
          <label class="label py-0"><span class="label-text text-xs">Title</span></label>
          <input type="text" id="docTitle" class="input input-bordered input-xs" placeholder="Document title">
        </div>
        <div class="form-control">
          <label class="label py-0"><span class="label-text text-xs">Author</span></label>
          <input type="text" id="docAuthor" class="input input-bordered input-xs" placeholder="Author name">
        </div>
        <div class="form-control">
          <label class="label py-0"><span class="label-text text-xs">Date</span></label>
          <input type="text" id="docDate" class="input input-bordered input-xs" placeholder="Leave empty for today">
        </div>
      </div>
    </div>

    <!-- Advanced Options -->
    <div class="collapse collapse-arrow bg-base-200 shadow">
      <input type="checkbox">
      <div class="collapse-title py-2 px-4 min-h-0 font-semibold text-sm">Advanced Options</div>
      <div class="collapse-content px-4 pb-3 space-y-3">

        <!-- Mermaid Diagrams -->
        <div class="space-y-1">
          <div class="flex items-center gap-2">
            <span class="text-xs font-semibold">Mermaid Diagrams</span>
            <span id="mermaidDetected" class="badge badge-xs badge-ghost hidden">detected</span>
          </div>
          <div class="flex items-center gap-2">
            <label class="label py-0 cursor-pointer gap-1">
              <input type="radio" name="mermaidFormat" value="svg" class="radio radio-xs" checked>
              <span class="label-text text-xs">SVG (vector)</span>
            </label>
            <label class="label py-0 cursor-pointer gap-1">
              <input type="radio" name="mermaidFormat" value="png" class="radio radio-xs">
              <span class="label-text text-xs">PNG (raster)</span>
            </label>
          </div>
          <p class="text-xs text-base-content/50">Mermaid diagrams are auto-detected and rendered</p>
        </div>

        <!-- Document Class -->
        <div class="form-control" id="docClassSection">
          <div class="flex items-center gap-1">
            <label class="label py-0"><span class="label-text text-xs">Document Class</span></label>
            <div class="tooltip tooltip-right" data-tip="LaTeX document classes define the overall layout: article (short docs), report (longer with chapters), book (two-sided printing), memoir (flexible), KOMA classes (European typography)">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 text-info cursor-help" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
            </div>
          </div>
          <select id="documentClass" class="select select-bordered select-xs">
            <option value="article">Article (short documents)</option>
            <option value="report">Report (chapters, longer docs)</option>
            <option value="book">Book (two-sided, chapters)</option>
            <option value="memoir">Memoir (flexible, advanced)</option>
            <option value="scrartcl">KOMA Article (European)</option>
          </select>
        </div>

        <!-- Pandoc Filters -->
        <div class="space-y-1">
          <span class="text-xs font-semibold">Processing Filters</span>
          <div class="flex flex-col gap-1">
            <label class="label py-0 cursor-pointer justify-start gap-1">
              <input type="checkbox" id="filterCrossref" class="checkbox checkbox-xs">
              <span class="label-text text-xs">pandoc-crossref</span>
              <div class="tooltip tooltip-right" data-tip="Enables cross-references: @fig:name for figures, @eq:name for equations, @sec:name for sections. Use {#fig:name} to label items.">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 text-info cursor-help" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
              </div>
            </label>
            <label class="label py-0 cursor-pointer justify-start gap-1">
              <input type="checkbox" id="filterCiteproc" class="checkbox checkbox-xs">
              <span class="label-text text-xs">citeproc (citations)</span>
              <div class="tooltip tooltip-right" data-tip="Process citations and bibliographies. Use [@key] to cite, requires a .bib file. Supports CSL styles for formatting.">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 text-info cursor-help" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
              </div>
            </label>
          </div>
        </div>

        <!-- Extra Pandoc Arguments -->
        <div class="form-control">
          <div class="flex items-center gap-1">
            <label class="label py-0"><span class="label-text text-xs">Extra Arguments</span></label>
            <div class="tooltip tooltip-right" data-tip="Additional pandoc command-line arguments. Examples: --shift-heading-level-by=-1, --wrap=none, --columns=80">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 text-info cursor-help" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
            </div>
          </div>
          <input type="text" id="extraArgs" class="input input-bordered input-xs font-mono" placeholder="--wrap=none">
        </div>

        <!-- Link Colors -->
        <div class="flex items-center gap-3">
          <label class="label py-0 cursor-pointer gap-1">
            <input type="checkbox" id="colorLinks" class="checkbox checkbox-xs" checked>
            <span class="label-text text-xs">Colored links</span>
          </label>
          <input type="color" id="linkColor" class="w-6 h-5 rounded cursor-pointer border-0" value="#0066cc">
        </div>
      </div>
    </div>

    <!-- Convert Button & Status -->
    <div class="card bg-base-200 shadow">
      <div class="card-body p-3">
        <button id="convertBtn" class="btn btn-primary btn-sm w-full gap-2" disabled>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" /></svg>
          Convert
        </button>

        <div id="statusArea" class="hidden mt-2">
          <progress id="progressBar" class="progress progress-primary w-full h-1"></progress>
          <p id="statusText" class="text-center text-xs mt-1"></p>
        </div>

        <!-- Command Preview -->
        <details class="mt-2">
          <summary class="text-xs cursor-pointer text-base-content/60">Command preview</summary>
          <code id="commandPreview" class="block mt-1 p-2 bg-base-300 rounded text-xs font-mono overflow-x-auto whitespace-pre-wrap">pandoc input.md -o output.pdf</code>
          <button id="copyCmd" class="btn btn-xs btn-ghost mt-1">Copy</button>
        </details>
      </div>
    </div>

  </div>

  <!-- Toast Notifications -->
  <div id="toastContainer" class="toast toast-end toast-bottom"></div>

  <script src="/src/main.js" type="module"></script>
</body>
</html>
